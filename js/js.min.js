var nota=0,respuesta1=null,respuestaselect1=null,url="https://rawgit.com/DaniTur/jsxml/master/xml/preguntas.xml",xhttp=new XMLHttpRequest;function gestionarXml(e){for(var t=e.responseXML,a=1;a<=t.getElementsByTagName("title").length;a++)document.getElementById("p"+[a]+"-e").innerHTML=t.getElementsByTagName("title")[a-1].innerHTML;formElement=document.getElementById("myform"),formElement.onsubmit=function(){return document.getElementById("resultadosDiv").innerHTML="",nota=0,function(){var e=formElement;for(a=0;a<e.checkbox1.length;a++)e.checkbox1[a].checked&&!0;return""==e.elements[0].value?(e.elements[0].focus(),alert("Escribe una respuesta en la pregunta 1"),!1):""==e.elements[1].value?(e.elements[1].focus(),alert("Escribe una respuesta  en la pregunta 2"),!1):0==e.elements[2].selectedIndex?(e.elements[2].focus(),alert("Selecciona una opci贸n en la pregunta 3"),!1):0==e.elements[3].selectedIndex?(e.elements[3].focus(),alert("Selecciona una opci贸n en la pregunta 4"),!1):0==e.elements[4].selectedIndex?(e.elements[4].focus(),alert("Selecciona una opci贸n en la pregunta 5"),!1):0!=e.elements[5].selectedIndex||(e.elements[5].focus(),alert("Selecciona una opci贸n en la pregunta 6"),!1)}()&&(!function(){var e=formElement.elements[0].value,n=t.getElementsByTagName("answer")[0].innerHTML;e==n?(D("P1: Correcta"),nota+=1):D("P1: Incorrecta");var a=formElement.elements[1].value,m=t.getElementsByTagName("answer")[1].innerHTML;a==m?(D("P2: Correcta"),nota+=1):D("P2: Incorrecta")}(),function(){var e=formElement.elements[2],n=t.getElementsByTagName("answer")[2].innerHTML;e.selectedIndex==n?(D("P3: Correcto"),nota+=1):D("P3: Incorrecto");var a=formElement.elements[3],m=t.getElementsByTagName("answer")[3].innerHTML;a.selectedIndex==m?(D("P4: Correcto"),nota+=1):D("P4: Incorrecta")}(),function(){for(var e=formElement,t=[],n=0;n<e.checkbox1.length;n++)if(e.checkbox1[n].checked){for(t[n]=!1,j=0;j<L.length;j++)n==respuestasCheckbox[j]&&(t[n]=!0);t[n]?(nota+=1/L,D("7: "+n+" correcta")):D("P7: "+n+" incorrecta")}}(),function(){var e=formElement;for(n=4;n<6;n++){var t=e.elements[n],m=[];for(a=1;a<t.length;a++){var s=t.options[a];if(s.selected){for(m[a]=!1,j=0;j<respuesta5.length;j++)a-1==respuesta5&&(m[a]=!0);m[a]?(nota+=1,D("P5: "+a+" correcta")):(D("P5: "+a+" incorrecta"),!0)}}}}(),D("Nota: "+nota+" puntos sobre 6")),!1},respuesta1=t.getElementsByTagName("answer")[0].innerHTML,respuesta2=t.getElementsByTagName("answer")[1].innerHTML;var m=[],s=t.getElementsByTagName("question")[2].getElementsByTagName("option").length,r=document.getElementsByTagName("select")[0];for(a=0;a<s;a++){m[a]=t.getElementsByTagName("question")[2].getElementsByTagName("option")[a].innerHTML;var l=document.createElement("option");l.text=m[a],l.value=a+1,r.appendChild(l)}respuesta3=t.getElementsByTagName("answer")[2].innerHTML;var o=[],g=t.getElementsByTagName("question")[3].getElementsByTagName("option").length,i=document.getElementsByTagName("select")[1];for(a=0;a<g;a++){o[a]=t.getElementsByTagName("question")[3].getElementsByTagName("option")[a].innerHTML;var c=document.createElement("option");c.text=o[a],c.value=a+1,i.appendChild(c)}respuesta4=t.getElementsByTagName("answer")[3].innerHTML;var u=[],p=t.getElementsByTagName("question")[4].getElementsByTagName("option").length,d=document.getElementsByTagName("select")[2];for(a=0;a<p;a++){u[a]=t.getElementsByTagName("question")[4].getElementsByTagName("option")[a].innerHTML;var E=document.createElement("option");E.text=u[a],E.value=a+1,E.classList.add("opciones"),d.appendChild(E)}respuesta5=t.getElementsByTagName("answer")[4].innerHTML;var T=t.getElementsByTagName("question")[5].getElementsByTagName("option").length,y=document.getElementsByTagName("select")[3];for(a=0;a<T;a++){u[a]=t.getElementsByTagName("question")[5].getElementsByTagName("option")[a].innerHTML;var B=document.createElement("option");B.text=u[a],B.value=a+1,B.classList.add("opciones"),y.appendChild(B)}respuesta6=t.getElementsByTagName("answer")[5].innerHTML;var N=[],h=t.getElementsByTagName("question")[6].getElementsByTagName("option").length,f=document.getElementsByTagName("form")[0].getElementsByClassName("pregunta")[6];for(a=0;a<h;a++){N[a]=t.getElementsByTagName("question")[6].getElementsByTagName("option")[a].innerHTML;var v=document.createElement("input");(A=document.createElement("label")).innerHTML=h[a],A.setAttribute("for","p7-r"+a),A.innerHTML=N[a],v.type="checkbox",v.name="checkbox1",v.id="p7-r"+a,v.value=a+1,f.appendChild(v),f.appendChild(A),f.appendChild(document.createElement("br"))}var L=t.getElementsByTagName("question")[6].getElementsByTagName("answer").length;for(a=0;a<L;a++)L[a]=t.getElementsByTagName("question")[6].getElementsByTagName("answer")[a].innerHTML;var M=[],H=t.getElementsByTagName("question")[7].getElementsByTagName("option").length,x=document.getElementsByTagName("form")[0].getElementsByClassName("pregunta")[7];for(a=0;a<H;a++){M[a]=t.getElementsByTagName("question")[7].getElementsByTagName("option")[a].innerHTML;v=document.createElement("input");(A=document.createElement("label")).innerHTML=H[a],A.setAttribute("for","p8-r"+a),A.innerHTML=M[a],v.type="checkbox",v.name="checkbox2",v.id="p8-r"+a,v.value=a+1,x.appendChild(v),x.appendChild(A),x.appendChild(document.createElement("br"))}var C=t.getElementsByTagName("question")[7].getElementsByTagName("answer").length;for(a=0;a<C;a++)C[a]=t.getElementsByTagName("question")[7].getElementsByTagName("answer")[a].innerHTML;var b=[],q=t.getElementsByTagName("question")[8].getElementsByTagName("option").length,w=document.getElementsByTagName("form")[0].getElementsByClassName("pregunta")[8];for(a=0;a<q;a++){b[a]=t.getElementsByTagName("question")[8].getElementsByTagName("option")[a].innerHTML;v=document.createElement("input");(A=document.createElement("label")).innerHTML=q[a],A.setAttribute("for","p9-r"+a),A.innerHTML=b[a],v.type="radio",v.id="p9-r"+a,v.value=a+1,v.classList.add("input"),w.appendChild(v),w.appendChild(A),w.appendChild(document.createElement("br"))}var I=t.getElementsByTagName("question")[8].getElementsByTagName("answer").length;for(a=0;a<I;a++)I[a]=t.getElementsByTagName("question")[8].getElementsByTagName("answer")[a].innerHTML;var k=[],P=t.getElementsByTagName("question")[9].getElementsByTagName("option").length,S=document.getElementsByTagName("form")[0].getElementsByClassName("pregunta")[9];for(a=0;a<P;a++){k[a]=t.getElementsByTagName("question")[9].getElementsByTagName("option")[a].innerHTML;var A;v=document.createElement("input");(A=document.createElement("label")).innerHTML=P[a],A.setAttribute("for","p10-r"+a),A.innerHTML=k[a],v.type="radio",v.id="p10-r"+a,v.value=a+1,v.classList.add("input"),S.appendChild(v),S.appendChild(A),S.appendChild(document.createElement("br"))}var X=t.getElementsByTagName("question")[9].getElementsByTagName("answer").length;for(a=0;a<X;a++)X[a]=t.getElementsByTagName("question")[9].getElementsByTagName("answer")[a].innerHTML;function D(e){var t=document.createElement("p"),n=document.createTextNode(e);t.appendChild(n),document.getElementById("resultadosDiv").appendChild(t)}}xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&gestionarXml(this)},xhttp.open("GET",url,!0),xhttp.send();
